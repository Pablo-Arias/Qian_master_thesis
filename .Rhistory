sid = as.character(sid),
user_id = as.character(user_id)
)
# ç­›é€‰ä¸»è¡¨ä¸­å¯¹åº” question çš„å­é›†å¹¶åˆå¹¶
data_q <- all_data_df %>%
filter(question_content == question) %>%
left_join(
srm_df[, c("sid", "user_id", "measure.p", "measure.t")],
by = c("sid", "user_id")
)
merged_chunks[[question]] <- data_q
} else {
message(paste("âš ï¸ æ–‡ä»¶æœªæ‰¾åˆ°:", file_path, "- å·²è·³è¿‡è¯¥é¡¹"))
# æ— æ–‡ä»¶ä¹Ÿä¿ç•™æ•°æ®å¹¶å¡«å…¥ NA
merged_chunks[[question]] <- all_data_df %>%
filter(question_content == question) %>%
mutate(relationship = NA)
}
}
# 5. åˆå¹¶æ‰€æœ‰éƒ¨åˆ†
all_data_srm <- bind_rows(merged_chunks)
# 6. ä¿å­˜æœ€ç»ˆæ•°æ®
write_csv(all_data_srm, "all_data_srm_all.csv")
message("ğŸ‰ æ‰€æœ‰å¯ç”¨æ•ˆåº”å·²æˆåŠŸåˆå¹¶åˆ° all_data_srm_all.csv")
#å»é‡
library(dplyr)
library(readr)
# è¯»å–æ•°æ®
df <- read_csv("all_data_srm_all.csv")
# æŒ‰ sid å’Œ user_id åˆ†ç»„ï¼Œä¿ç•™ç¬¬ä¸€æ¡è®°å½•ï¼ˆå›  perceiver/target_effect ç›¸åŒï¼‰
df_unique <- df %>%
group_by(sid, user_id , question_content) %>%
slice(1) %>%
ungroup()
# ä¿å­˜å»é‡ç»“æœï¼ˆå¯é€‰ï¼‰
write_csv(df_unique, "all_data_srm_unique.csv")
message("âœ… å·²å®ŒæˆæŒ‰ sid + user_id å»é‡å¹¶ä¿ç•™å”¯ä¸€è¡Œã€‚")
#ç”»å›¾
# åŠ è½½å¿…è¦åŒ…
library(ggplot2)
library(dplyr)
# è¯»å–æ•°æ®ï¼ˆå‡è®¾ä½ å·²ç»ç”¨ read.csv() è¯»å…¥ä¸º dfï¼‰
df <- read.csv("all_data_srm_unique.csv")
ggplot(df, aes(x = question_content, y = measure.p)) +
geom_boxplot(fill = "lightblue", alpha = 0.7) +
geom_jitter(width = 0.2, alpha = 0.4, color = "black") +
theme_minimal() +
labs(title = "measure.p by Question Content",
x = "Question Content",
y = "pe")
#ç”»å›¾
# åŠ è½½å¿…è¦åŒ…
library(ggplot2)
library(dplyr)
# è¯»å–æ•°æ®ï¼ˆå‡è®¾ä½ å·²ç»ç”¨ read.csv() è¯»å…¥ä¸º dfï¼‰
df <- read.csv("all_data_srm_unique.csv")
ggplot(df, aes(x = question_content, y = measure.t)) +
geom_boxplot(fill = "lightblue", alpha = 0.7) +
geom_jitter(width = 0.2, alpha = 0.4, color = "black") +
theme_minimal() +
labs(title = "measure.p by Question Content",
x = "Question Content",
y = "pe")
#å°æç´å›¾
# åŠ è½½å¿…è¦çš„åŒ…
library(ggplot2)
# è¯»å–æ•°æ®ï¼ˆå‡è®¾ä½ å·²å°†æ•°æ®è¯»å…¥ä¸º dfï¼‰
df <- read.csv("all_data_srm_unique.csv")
# ç»˜åˆ¶ç®±çº¿å›¾
df %>%
drop_na(question_content) %>%
mutate(question_content = factor(question_content,
levels = c("liked", "other_liked","conversation_quality","video_conf_quality"))) %>%
ggplot(aes(y = target_effect, x = question_content, fill = question_content)) +
geom_boxplot() +
scale_y_continuous(name = "Interest score (1-7)",
breaks = c(1:7)) +
scale_fill_viridis_d(option = "E",
alpha = 0.6) +
guides(fill = "none")
#å°æç´å›¾
# åŠ è½½å¿…è¦çš„åŒ…
library(ggplot2)
# è¯»å–æ•°æ®ï¼ˆå‡è®¾ä½ å·²å°†æ•°æ®è¯»å…¥ä¸º dfï¼‰
df <- read.csv("all_data_srm_unique.csv")
# ç»˜åˆ¶ç®±çº¿å›¾
df %>%
drop_na(question_content) %>%
mutate(question_content = factor(question_content,
levels = c("liked", "other_liked","conversation_quality","video_conf_quality"))) %>%
ggplot(aes(y = measure.p, x = question_content, fill = question_content)) +
geom_boxplot() +
scale_y_continuous(name = "Interest score (1-7)",
breaks = c(1:7)) +
scale_fill_viridis_d(option = "E",
alpha = 0.6) +
guides(fill = "none")
#æŸ±çŠ¶å›¾
# è¯»å–æ•°æ®ï¼ˆå‡è®¾ä½ å·²å°†æ•°æ®è¯»å…¥ä¸º dfï¼‰
df <- read.csv("all_data_srm_unique.csv")
# åŠ è½½å¿…è¦åŒ…
library(ggplot2)
library(dplyr)
# å‡è®¾ä½ çš„æ•°æ®æ¡†åä¸º df
# 1. è®¡ç®—æ¯ä¸ª question_content çš„å¹³å‡å€¼
mean_df <- df %>%
group_by(question_content) %>%
summarise(mean_measure_p = mean(measure.t, na.rm = TRUE))
View(mean_df)
ggplot(mean_df, aes(x = question_content, y = mean_measure_p)) +
geom_col(fill = "skyblue") +
geom_text(aes(label = signif(mean_measure_p, 3)), vjust = -0.5) +
theme_minimal() +
labs(title = "Mean of measure.p by Question Content",
x = "Question Content",
y = "Mean of measure.p") +
coord_cartesian(ylim = c(-0.01, 0.01)) +  # æ‰‹åŠ¨è®¾ç½®yè½´èŒƒå›´
theme(axis.text.x = element_text(angle = 45, hjust = 1))
#è¯»å–åŸå§‹æ•°æ® åˆ†æç›¸å…³æ€§
originaldata <- read_csv("data/behavior/srm/liked_effects.csv")
correlation(data = originaldata,
select = "measure.p",
select2 = "measure.t",
method = "spearman",
alternative = "two.sided")
#æŒ‰ç…§é—®é¢˜åˆ†ç»„
library(purrr)
# 1. æŒ‰ question_content åˆ†ç»„
grouped <- df %>%
group_by(question_content) %>%
group_split()
# 2. å¯¹æ¯ä¸€ç»„è¿è¡Œ correlation()
cor_list <- map(grouped, ~ correlation(select(., measure.p, measure.t), method = "spearman"))
# correlation  between measure.p and measure.t
#install.packages("correlation")  # å¦‚æœè¿˜æ²¡è£…
#æŸ¥çœ‹æ€»çš„correlation
library(correlation)
df <- read_csv("all_data_srm_unique.csv")
df %>%
ggplot(aes(x = measure.p, y = measure.t)) +
geom_point() +
geom_smooth(method = "lm") +
scale_x_continuous(name = "measure.p",
breaks = c(1:9)) +
scale_y_continuous(name = " measure.t",
breaks = c(1:6))
correlation(data = df,
select = "measure.p",
select2 = "measure.t",
method = "spearman",
alternative = "two.sided")
#æŒ‰ç…§é—®é¢˜åˆ†ç»„
library(purrr)
# 1. æŒ‰ question_content åˆ†ç»„
grouped <- df %>%
group_by(question_content) %>%
group_split()
# 2. å¯¹æ¯ä¸€ç»„è¿è¡Œ correlation()
cor_list <- map(grouped, ~ correlation(select(., measure.p, measure.t), method = "spearman"))
# correlation  between measure.p and measure.t
#install.packages("correlation")  # å¦‚æœè¿˜æ²¡è£…
#æŸ¥çœ‹æ€»çš„correlation
library(correlation)
df <- read_csv("all_data_srm_unique.csv")
df %>%
ggplot(aes(x = measure.p, y = measure.t)) +
geom_point() +
geom_smooth(method = "lm") +
scale_x_continuous(name = "measure.p",
breaks = c(1:9)) +
scale_y_continuous(name = " measure.t",
breaks = c(1:6))
correlation(data = df,
select = "measure.p",
select2 = "measure.t",
method = "spearman",
alternative = "two.sided")
#æŒ‰ç…§é—®é¢˜åˆ†ç»„
library(purrr)
# 1. æŒ‰ question_content åˆ†ç»„
grouped <- df %>%
group_by(question_content) %>%
group_split()
# 2. å¯¹æ¯ä¸€ç»„è¿è¡Œ correlation()
cor_list <- map(grouped, ~ correlation(select(., measure.p, measure.t), method = "spearman"))
#correlation  åŒä¸€ç»„AtoB å’ŒBto A
#calculate correlation
library(dplyr)
library(tidyr)
library(tidyverse)
library(dplyr)
library(TripleR)
library(lme4)
library(lmerTest)
library(ggplot2)
library(correlation)
# å‡è®¾ä½ çš„æ•°æ®å« dfï¼Œä¸”å·²åŠ è½½
df <- read.csv("all_data_srm_all.csv")  # æ›¿æ¢ä¸ºä½ çš„å®é™…è·¯å¾„
# åˆ›å»ºæ ‡å‡† dyadï¼ˆåŒå‘ç»Ÿä¸€ï¼‰
df <- df %>%
mutate(dyad_std = ifelse(as.character(user_id) < as.character(other_id),
paste(user_id, other_id, sep = "_"),
paste(other_id, user_id, sep = "_")))
# åªä¿ç•™ measureï¼ˆæˆ– relationshipï¼‰ä¸¤ä¸ªæ–¹å‘éƒ½å­˜åœ¨çš„æ•°æ®
df_wide <- df %>%
select(dyad_std, user_id, other_id, question_content, measure,relationship) %>%
pivot_wider(names_from = user_id, values_from = measure)  # å®½æ ¼å¼è½¬åŒ–
# æˆ–è€…å¦ä¸€ç§åšæ³•ï¼šé…å¯¹å¹¶åˆå¹¶æˆ Aâ†’B å’Œ Bâ†’A ä¸¤è¡Œæ‹¼ä¸€è¡Œ
df_paired <- df %>%
select(dyad_std, question_content, user_id, other_id, measure,relationship) %>%
group_by(dyad_std, question_content) %>%
filter(n() == 2) %>%
arrange(dyad_std, question_content, user_id) %>%
mutate(pair_id = paste0(dyad_std, "_", question_content)) %>%
summarise(question_content,
rel1 = first(measure),
rel2 = last(measure),
relationship1=first(relationship),
relationship2=last(relationship)
)
df_paired %>%
ggplot(aes(x = rel1, y = rel2)) +
geom_point() +
geom_smooth(method = "lm") +
scale_x_continuous(name = "rel1",
breaks = c(1:9)) +
scale_y_continuous(name = " rel2",
breaks = c(1:6))
#å­˜è¡¨
write.csv(df_paired, "data/behavior/srm/correlation.csv", row.names = FALSE)
#correlation  åŒä¸€ç»„AtoB å’ŒBto A  åŒä¸€ä¸ªé—®é¢˜çš„correlation
#calculate correlation
library(dplyr)
library(tidyr)
library(tidyverse)
library(dplyr)
library(TripleR)
library(lme4)
library(lmerTest)
library(ggplot2)
library(correlation)
# å‡è®¾ä½ çš„æ•°æ®å« dfï¼Œä¸”å·²åŠ è½½
df <- read.csv("all_data_srm_all.csv")  # æ›¿æ¢ä¸ºä½ çš„å®é™…è·¯å¾„
# åˆ›å»ºæ ‡å‡† dyadï¼ˆåŒå‘ç»Ÿä¸€ï¼‰
df <- df %>%
mutate(dyad_std = ifelse(as.character(user_id) < as.character(other_id),
paste(user_id, other_id, sep = "_"),
paste(other_id, user_id, sep = "_")))
# åªä¿ç•™ measureï¼ˆæˆ– relationshipï¼‰ä¸¤ä¸ªæ–¹å‘éƒ½å­˜åœ¨çš„æ•°æ®
df_wide <- df %>%
select(dyad_std, user_id, other_id, question_content, measure,relationship) %>%
pivot_wider(names_from = user_id, values_from = measure)  # å®½æ ¼å¼è½¬åŒ–
# æˆ–è€…å¦ä¸€ç§åšæ³•ï¼šé…å¯¹å¹¶åˆå¹¶æˆ Aâ†’B å’Œ Bâ†’A ä¸¤è¡Œæ‹¼ä¸€è¡Œ
df_paired <- df %>%
select(dyad_std, question_content, user_id, other_id, measure,relationship) %>%
group_by(dyad_std, question_content) %>%
filter(n() == 2) %>%
arrange(dyad_std, question_content, user_id) %>%
mutate(pair_id = paste0(dyad_std, "_", question_content)) %>%
summarise(question_content,
rel1 = first(measure),
rel2 = last(measure),
relationship1=first(relationship),
relationship2=last(relationship)
)
df_paired %>%
ggplot(aes(x = rel1, y = rel2)) +
geom_point() +
geom_smooth(method = "lm") +
scale_x_continuous(name = "rel1",
breaks = c(1:9)) +
scale_y_continuous(name = " rel2",
breaks = c(1:6))
#å­˜è¡¨
#write.csv(df_paired, "data/behavior/srm/correlation.csv", row.names = FALSE)
correlation(data = df_paired,
select = "rel1",
select2 = "rel2",
method = "spearman",
alternative = "two.sided")
library(correlation)
# åªå–ä½ è¦åˆ†æçš„åˆ—ï¼Œæ„å»ºä¸€ä¸ªç®€æ´æ•°æ®æ¡†
rel_data  <- df_paired %>% select(rel1, rel2)
# ä½¿ç”¨ correlation() æ˜ç¡®è¯´æ˜åˆ—åï¼Œä¸è®©å®ƒè‡ªåŠ¨åˆ†ç»„
cor_result <- correlation(
data = rel_data,
method = "spearman"
)
print(cor_result)
library(purrr)
# 1. æŒ‰ question_content åˆ†ç»„
grouped <- df_paired %>%
group_by(question_content) %>%
group_split()
# 2. å¯¹æ¯ä¸€ç»„è¿è¡Œ correlation()
cor_list <- map(grouped, ~ correlation(select(., rel1, rel2), method = "spearman"))
# 3. åŠ ä¸Šåˆ†ç»„åå¹¶ç»„åˆæˆä¸€ä¸ªè¡¨
names(cor_list) <- sapply(grouped, function(x) unique(x$question_content))
cor_combined <- bind_rows(cor_list, .id = "question_content")
# æŸ¥çœ‹
print(cor_combined)
# æŸ¥çœ‹ç»“æœ
print(cor_result)
# è®¡ç®—é…å¯¹ç›¸å…³æ€§ï¼ˆæ¯ç§ question_content ä¸€æ¬¡ï¼‰
cor_results <- df_paired %>%
group_by(question_content) %>%
summarise(
correlation = cor(rel1, rel2, use = "complete.obs"),
n = n()
)
print(cor_results)
#è®¡ç®—å…³ç³» åŒä¸€ç»„AtoB å’ŒBto A
library(ggplot2)
library(correlation)
library(dplyr)
df <- read.csv("data/behavior/srm/correlation.csv")  # æ›¿æ¢ä¸ºä½ çš„å®é™…è·¯å¾„
df %>%
ggplot(aes(x = rel1, y = rel2)) +
geom_point() +
geom_smooth(method = "lm") +
scale_x_continuous(name = "rel1",
breaks = c(1:9)) +
scale_y_continuous(name = " rel2",
breaks = c(1:6))
correlation(data = df,
select = "rel1",
select2 = "rel2",
method = "spearman",
alternative = "two.sided")
library(purrr)
#å»é‡
df_unique <- df %>%
distinct(dyad_std, question_content, .keep_all = TRUE)
# 1. æŒ‰ question_content åˆ†ç»„
grouped <- df_unique %>%
group_by(question_content) %>%
group_split()
# 2. å¯¹æ¯ä¸€ç»„è¿è¡Œ correlation()
cor_list <- map(grouped, ~ correlation(select(., rel1, rel2), method = "spearman"))
# 3. åŠ ä¸Šåˆ†ç»„åå¹¶ç»„åˆæˆä¸€ä¸ªè¡¨
names(cor_list) <- sapply(grouped, function(x) unique(x$question_content))
cor_combined <- bind_rows(cor_list, .id = "question_content")
# æŸ¥çœ‹
print(cor_combined)
df_liked <- df %>%
filter(question_content == "liked")
df_liked %>%
ggplot(aes(x = rel1, y = rel2)) +
geom_point() +
geom_smooth(method = "lm") +
scale_x_continuous(name = "rel1",
breaks = c(1:9)) +
scale_y_continuous(name = " rel2",
breaks = c(1:6))
correlation(data = df_liked,
select = "rel1",
select2 = "rel2",
method = "spearman",
alternative = "two.sided")
# èƒ½å¦é¢„æµ‹æœ€ç»ˆç‰ˆæœ¬  è¿™ä¸¤ä¸ªç›¸å…³æ€§åº”è¯¥æ˜¯ä¸€æ ·çš„å§ å› ä¸ºä»…ä»…æ˜¯äº¤æ¢çºµåæ ‡å’Œæ¨ªåæ ‡
library(tidyverse)
# è¯»å–æ•°æ®
data <- read.csv("data/behavior/all_data_df.csv")  # æ›¿æ¢ä¸ºä½ çš„æ–‡ä»¶è·¯å¾„
# ç­›é€‰ liked å’Œ other_liked ä¸¤ç§é¢˜ç›®
filtered_data <- data %>%
filter(question_content %in% c("liked", "other_liked"))
# å°†è‡ªå·±çš„ liked / other_liked åˆ†åˆ« pivot ä¸ºå®½æ ¼å¼
own_wide <- filtered_data %>%
select(dyad, user_id, other_id, question_content, measure) %>%
pivot_wider(names_from = question_content, values_from = measure) %>%
rename(own_liked = liked, own_other_liked = other_liked)
# partner çš„ liked å’Œ other_likedï¼Œäº¤æ¢ user_id å’Œ other_id
partner_wide <- filtered_data %>%
select(dyad, user_id, other_id, question_content, measure) %>%
pivot_wider(names_from = question_content, values_from = measure) %>%
rename(partner_liked = liked, partner_other_liked = other_liked) %>%
rename(user_id_partner = user_id, other_id_partner = other_id)
# åˆå¹¶ï¼šæŒ‰ dyad å’Œ user_id / other_id åŒ¹é… partner æ•°æ®
merged_data <- own_wide %>%
left_join(partner_wide,
by = c("dyad" = "dyad", "user_id" = "other_id_partner", "other_id" = "user_id_partner"))
# æˆ‘æ˜¯å¦èƒ½é¢„æµ‹åˆ«äººå–œæ¬¢æˆ‘
cor1 <- cor.test(merged_data$own_other_liked, merged_data$partner_liked, use = "complete.obs")
print(cor1)
# åˆ«äººæ˜¯å¦èƒ½é¢„æµ‹æˆ‘å–œæ¬¢ä»–ä»¬
cor2 <- cor.test(merged_data$partner_other_liked, merged_data$own_liked, use = "complete.obs")
print(cor2)
cor.test(merged_data$partner_other_liked, merged_data$own_liked,
method = "spearman", use = "complete.obs")
cor.test(merged_data$partner_liked, merged_data$own_other_liked,
method = "spearman", use = "complete.obs")
merged_data %>%
ggplot(aes(x = own_liked, y = partner_other_liked)) +
geom_point() +
geom_smooth(method = "lm") +
scale_x_continuous(name = "own_liked",
breaks = c(1:9)) +
scale_y_continuous(name = " partner_other_liked",
breaks = c(1:6))
library(correlation)
correlation(data = merged_data,
select = "own_liked",
select2 = "partner_other_liked",
method = "spearman",
alternative = "two.sided")
View(merged_data)
#åˆ†æ ç›¸å…³æ€§
library(tidyverse)
# è¯»å–æ•°æ®
data <- read.csv("data/behavior/all_data_df.csv")
# æå– liked å’Œ other_liked ä¸¤ä¸ªé—®é¢˜çš„æ•°æ®
liked_data <- data %>%
filter(question_content == "liked") %>%
select(dyad, user_id, liked = measure)
other_liked_data <- data %>%
filter(question_content == "other_liked") %>%
select(dyad, user_id, other_liked = measure)
# åœ¨ dyad å†…åŒºåˆ† person_1 å’Œ person_2ï¼Œå¯ä»¥æŒ‰ user_id æ’åºæˆ–åŸå§‹é¡ºåº
liked_data <- liked_data %>%
group_by(dyad) %>%
arrange(user_id) %>%  # æŒ‰ user_id å‡åºæ’åˆ— dyad å†…çš„ä¸¤ä¸ªäºº
mutate(person = row_number())
other_liked_data <- other_liked_data %>%
group_by(dyad) %>%
arrange(user_id) %>%
mutate(person = row_number())
# person_1 çš„ liked å’Œ other_liked
person1_liked <- liked_data %>% filter(person == 1) %>% select(dyad, liked_p1 = liked)
person1_other_liked <- other_liked_data %>% filter(person == 1) %>% select(dyad, other_liked_p1 = other_liked)
# person_2 çš„ liked å’Œ other_liked
person2_liked <- liked_data %>% filter(person == 2) %>% select(dyad, liked_p2 = liked)
person2_other_liked <- other_liked_data %>% filter(person == 2) %>% select(dyad, other_liked_p2 = other_liked)
# åˆå¹¶æˆ dyad å±‚çº§çš„æ•°æ®
dyad_data <- person1_liked %>%
left_join(person1_other_liked, by = "dyad") %>%
left_join(person2_liked, by = "dyad") %>%
left_join(person2_other_liked, by = "dyad")
# æŸ¥çœ‹åˆå¹¶åçš„æ•°æ®
print(dyad_data)
# æ–¹å‘1ï¼šåˆ«äººæ˜¯å¦åˆ¤æ–­æˆ‘å–œæ¬¢ä»–ä»¬
# å³ person1 çš„ liked_p1 ä¸ person2 çŒœæµ‹ person1 æ˜¯å¦å–œæ¬¢è‡ªå·± (other_liked_p2)
cor_1 <- cor.test(dyad_data$liked_p1, dyad_data$other_liked_p2)
print(cor_1)
# æ–¹å‘2ï¼šæˆ‘æ˜¯å¦åˆ¤æ–­åˆ«äººå–œæ¬¢æˆ‘
# å³ person2 çš„ liked_p2 ä¸ person1 çŒœæµ‹ person2 æ˜¯å¦å–œæ¬¢è‡ªå·± (other_liked_p1)
cor_2 <- cor.test(dyad_data$liked_p2, dyad_data$other_liked_p1)
print(cor_2)
View(cor_results)
View(dyad_data)
#åˆ†æ ç›¸å…³æ€§
library(tidyverse)
# è¯»å–æ•°æ®
data <- read.csv("data/behavior/all_data_df.csv")
# æå– liked å’Œ other_liked ä¸¤ä¸ªé—®é¢˜çš„æ•°æ®
liked_data <- data %>%
filter(question_content == "liked") %>%
select(dyad, user_id, liked = measure)
other_liked_data <- data %>%
filter(question_content == "other_liked") %>%
select(dyad, user_id, other_liked = measure)
# åœ¨ dyad å†…åŒºåˆ† person_1 å’Œ person_2ï¼Œå¯ä»¥æŒ‰ user_id æ’åºæˆ–åŸå§‹é¡ºåº
liked_data <- liked_data %>%
group_by(dyad) %>%
arrange(user_id) %>%  # æŒ‰ user_id å‡åºæ’åˆ— dyad å†…çš„ä¸¤ä¸ªäºº
mutate(person = row_number())
other_liked_data <- other_liked_data %>%
group_by(dyad) %>%
arrange(user_id) %>%
mutate(person = row_number())
# person_1 çš„ liked å’Œ other_liked
person1_liked <- liked_data %>% filter(person == 1) %>% select(dyad, liked_p1 = liked)
person1_other_liked <- other_liked_data %>% filter(person == 1) %>% select(dyad, other_liked_p1 = other_liked)
# person_2 çš„ liked å’Œ other_liked
person2_liked <- liked_data %>% filter(person == 2) %>% select(dyad, liked_p2 = liked)
person2_other_liked <- other_liked_data %>% filter(person == 2) %>% select(dyad, other_liked_p2 = other_liked)
# åˆå¹¶æˆ dyad å±‚çº§çš„æ•°æ®
dyad_data <- person1_liked %>%
left_join(person1_other_liked, by = "dyad") %>%
left_join(person2_liked, by = "dyad") %>%
left_join(person2_other_liked, by = "dyad")
# æŸ¥çœ‹åˆå¹¶åçš„æ•°æ®
print(dyad_data)
# æ–¹å‘1ï¼šåˆ«äººæ˜¯å¦åˆ¤æ–­æˆ‘å–œæ¬¢ä»–ä»¬
# å³ person1 çš„ liked_p1 ä¸ person2 çŒœæµ‹ person1 æ˜¯å¦å–œæ¬¢è‡ªå·± (other_liked_p2)
cor_1 <- cor.test(dyad_data$liked_p1, dyad_data$other_liked_p2)
print(cor_1)
# æ–¹å‘2ï¼šæˆ‘æ˜¯å¦åˆ¤æ–­åˆ«äººå–œæ¬¢æˆ‘
# å³ person2 çš„ liked_p2 ä¸ person1 çŒœæµ‹ person2 æ˜¯å¦å–œæ¬¢è‡ªå·± (other_liked_p1)
cor_2 <- cor.test(dyad_data$liked_p2, dyad_data$other_liked_p1)
print(cor_2)
merged_data %>%
ggplot(aes(x = own_liked, y = partner_other_liked)) +
geom_point() +
geom_smooth(method = "lm") +
scale_x_continuous(name = "own_liked",
breaks = c(1:9)) +
scale_y_continuous(name = " partner_other_liked",
breaks = c(1:6))
library(correlation)
correlation(data = merged_data,
select = "own_liked",
select2 = "partner_other_liked",
method = "spearman",
alternative = "two.sided")
library(correlation)
correlation(data = merged_data,
select = "own_liked",
select2 = "partner_other_liked",
method = "spearman",
alternative = "two.sided")
```
write_csv(merged_data, "all_data_dyad_prediction.csv")
